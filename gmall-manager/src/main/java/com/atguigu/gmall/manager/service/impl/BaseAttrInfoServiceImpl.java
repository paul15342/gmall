package com.atguigu.gmall.manager.service.impl;import com.alibaba.dubbo.config.annotation.Service;import com.atguigu.gmall.bean.BaseAttrInfo;import com.atguigu.gmall.bean.BaseAttrValue;import com.atguigu.gmall.manager.mapper.BaseAttrInfoMapper;import com.atguigu.gmall.manager.mapper.BaseAttrValueMapper;import com.atguigu.gmall.service.BaseAttrInfoService;import org.springframework.beans.factory.annotation.Autowired;import java.util.List;@Servicepublic class BaseAttrInfoServiceImpl implements BaseAttrInfoService {    @Autowired    private BaseAttrInfoMapper baseAttrInfoMapper;    @Autowired    private BaseAttrValueMapper baseAttrValueMapper;    @Override    public void saveAttrInfo (BaseAttrInfo baseAttrInfo) {        //1,保存属性名        baseAttrInfo.setId(null);        baseAttrInfoMapper.insertSelective(baseAttrInfo);        String id = baseAttrInfo.getId();        //2,保存属性值        List<BaseAttrValue> attrValueList = baseAttrInfo.getAttrValueList();        for (BaseAttrValue baseAttrValue:attrValueList) {            baseAttrValue.setAttrId(id);            //在attr_value中插入数据            baseAttrValueMapper.insertSelective(baseAttrValue);        }    }    //根据ctg3id查询属性列表    @Override    public List<BaseAttrInfo> selectAttrList (String ctg3Id) {        BaseAttrInfo baseAttrInfo = new BaseAttrInfo();        baseAttrInfo.setCatalog3Id(ctg3Id);        List<BaseAttrInfo> attrInfos = baseAttrInfoMapper.select(baseAttrInfo);        return attrInfos;    }    @Override    public List<BaseAttrInfo> selectAttrListBycCata3Id (String catalog3Id) {        BaseAttrInfo baseAttrInfo = new BaseAttrInfo();        baseAttrInfo.setCatalog3Id(catalog3Id);        //根据cata3Id 获取平台属性列表        List<BaseAttrInfo> baseAttrs = baseAttrInfoMapper.select(baseAttrInfo);        for (BaseAttrInfo baseAttr : baseAttrs) {            String baseAttrId = baseAttr.getId();            //根据查询的attrId 在 base_attr_value中查询 平台属性值            BaseAttrValue baseAttrValue = new BaseAttrValue();            baseAttrValue.setAttrId(baseAttrId);            List<BaseAttrValue> baseAttrValues = baseAttrValueMapper.select(baseAttrValue);            //将查询到的平台属性值添加到平台属性中            baseAttr.setAttrValueList(baseAttrValues);        }        return baseAttrs;    }}